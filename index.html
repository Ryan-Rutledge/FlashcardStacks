<!doctype html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="initial-scale=1.0, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />

		<title>Flashcard Stacks</title>

		<link href="css/flashcardStacks.css" rel="stylesheet" type="text/css" />
		<script src="js/flashcardStacks.js" type="text/javascript"></script>

		<style>
			html, body, #integers {height: 100%;}
			body, p {
				line-height: 1.4em;
				margin: 0; padding: 0;
			}
			body, input {
				background-color: #3d3c3a;
				color: #ffffff;
				font-family: sans-serif;
			}
			span, input {
				display: table-cell;
				font-size: 1.5em;
				vertical-align: middle;
			}
			input {border: none; width: 50%;}
			.fc_container {
				float: left;
				position: relative;
				height: 50%; width: 50%;
				border: 2px solid #707070;
				box-sizing: border-box;
			}
			.fc_content {
				display: table;
				padding: 5px;
				line-height: 2em;
				text-align: center;
			}
			.note {
				position: absolute;
				left: 5px; top: 5px;
			}
			#integers {float: right;}
			.one {background-color: #8bc53f}
			.two {background-color: #d32127}
		</style>
	</head>
	<body onload="init()">
		<!-- words stack -->
		<div id="words" class="fc_container" fc-width="600" fc-height="300" fc-tester="TESTING 1 2 3" fc-margin="10%" fc-arrowkeys fc-tilt fc-swipe>
			<div class="fc_content one">
				<!-- Front of card one -->
				<span>2:1 Ratio</span>
			</div>
			<div class="fc_content one">
				<!-- Back of card one -->
				<p>This is a &lt;p&gt; tag. It contains ten different words!</p>
			</div>

			<div class="fc_content two" fc-onFlipDown="changeText">
				<!-- Front of card two -->
				<p>What do you want the back of this card to say?</p>
				<input name="say" onchange="fc.stacks['words'].flipCard();" autocomplete="off" maxlength="25" type="text" /><br />
			</div>
			<div class="fc_content two">
				<!-- Back of card two -->
				<span id="backSpan">2<sup>nd</sup> Card</span>
			</div>

			<div class="note">Arrow keys, tilting, and swiping</div>
		</div>

		<!-- integers stack -->
		<div id="integers" class="fc_container" fc-drag fc-swipe fc-tilt>
			<div class="note">Dragging, tilting, and swiping</div>
		</div>

		<!-- colors stack -->
		<div id="colors" class="fc_container" fc-width="500" fc-height="500" fc-drag fc-click fc-swipe fc-scale>
			<div class="note">Dragging, clicking, and swiping</div>
		</div>

		<script>
			/******************************
			 * JavaScript                 *
			 ******************************/

			// Change back inner html of card
			function changeText(stack) {
				say = document.getElementsByName('say')[0]
				say.blur();

				document.getElementById('backSpan').innerHTML = say.value; 
				document.activeElement = document.body
			}

			// Draw text in center of canvas
			function drawCenter(text, ctx) {
				var w = ctx.canvas.width / 2;
				var h = ctx.canvas.height / 2;

				ctx.fillStyle = '#333';
				ctx.textAlign = 'center';
				ctx.textBaseline = 'middle';
				ctx.fillText(text, w, h);
			}

			/******************************
			 * Integer class methods      *
			 ******************************/

			// Integer constructor
			Integer = function(number, string) {
				this.number = number;
				this.string = string;
			}

			// Draws the front of an integer card
			Integer.prototype.drawFront = function(ctx) {
				ctx.font = (ctx.canvas.height / 2) + 'px "Trebuchet MS", "Tahoma", sans-serif';
				drawCenter(this.string, ctx)
			}

			// Draws the back of an integer card
			Integer.prototype.drawBack = function(ctx) {
				var w = ctx.canvas.width / 2;
				var h = ctx.canvas.height / 2;
				var circleDist = w / 2;
				var circleDiameter = w / 5;

				// Draw circles
				ctx.fillStyle = '#333';
				for (var i = 0; i < this.number; i++) {
					ctx.beginPath()
					ctx.arc(circleDist+circleDist*(i%3), h * (i >= 3 ? 1.4:0.6), circleDiameter, 0, 2*Math.PI);
					ctx.fill();
					ctx.closePath()
				}
			}

			/******************************
			 * Color class methods        *
			 ******************************/

			// Color constructor
			Color = function(color) {
				this.color = color;
			}

			// Draws the front of a color card
			Color.prototype.drawFront = function(ctx) {
				var w = ctx.canvas.width / 2;
				var h = ctx.canvas.height / 2;

				// Draw string
				ctx.font = (ctx.canvas.width / 4) + 'px serif';
				drawCenter(this.color, ctx);
			}

			// Draws the back of a color card
			Color.prototype.drawBack = function(ctx) {
				// Color
				ctx.fillStyle = this.color;
				ctx.beginPath()
				ctx.arc(ctx.canvas.width/2, ctx.canvas.height/2, ctx.canvas.height/3, 0, 2*Math.PI);
				ctx.fill();
				ctx.closePath()
			}

			// Change container color
			Color.prototype.onFlipDown = function(stack) {
				stack.container.style.backgroundColor = this.color;
			}
			// Restore container color
			Color.prototype.onFlipUp = function(stack) {
				stack.container.style.backgroundColor = '';
			}
			// If stack is faceup, call function 'onflipdown'
			Color.prototype.onEnter = function(stack) {
				if (!stack.isFaceUp) this.onFlipDown(stack);
			}

			/******************************
			 * Init function              *
			 ******************************/

			 function init() {
				// Load flashcards onto webpage
				fc.init({
					'integers': [
						new Integer(1, 'One'),
						new Integer(2, 'Two'),
						new Integer(3, 'Three'),
						new Integer(4, 'Four'),
						new Integer(5, 'Five'),
						new Integer(6, 'Six'),
					],
					'colors': [
						new Color('Green'),
						new Color('Blue'),
						new Color('Purple')
					]
				});
			 }
		</script>
	</body>
</html>
